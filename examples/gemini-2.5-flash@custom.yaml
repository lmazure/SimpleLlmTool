url: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent
modelName: UNUSED
apiKeyEnvVar: GOOGLE_GEMINI_API_KEY
payloadTemplate: |
        {
          {{#each messages}}{{#if (isSystem role)}}"system_instruction": {
            "parts": [
              {
                "text": {{convertToJsonString content}}
              }
            ]
          },{{/if}}{{/each}}
          "contents": [
            {{#each messages}}{{#if (isUser role)}}{
              "role": "user",
              "parts": [
                {
                  "text": {{convertToJsonString content}}
                }
              ]
            }{{#unless @last}},
            {{/unless}}{{/if}}{{#if (isModel role)}}{
              "role": "model",
              "parts": [
                {{#if content}}{
                  "text": {{convertToJsonString content}}
                }{{/if}}
                {{#each toolCalls}}{
                "functionCall": {
                "name": {{convertToJsonString toolName}},
                  "args": {
                    {{#each toolParameters}}
                    {{convertToJsonString parameterName}}: {{convertToJsonString parameterValue}}
                    {{#unless @last}},
                    {{/unless}}{{/each}}
                  }
                }
                {{#unless @last}},
                {{/unless}} } {{/each}}
              ]
            }{{#unless @last}},
            {{/unless}}{{/if}}{{#if (isTool role)}}{
              "role": "function",
              "parts": [
                {
                  "functionResponse": {
                    "name": {{convertToJsonString toolName}},
                    "response": {
                      "result": {{convertToJsonString content}}
                    }
                  }
                }
              ]
            }{{#unless @last}},
            {{/unless}}{{/if}}{{/each}}
          ],
          "tools": [
            {
              "function_declarations": [
                {{#each tools}}{
                  "name": {{convertToJsonString name}},
                  "description": {{convertToJsonString description}},
                  "parameters": {
                    "type": "object",
                    "properties": {
                      {{#each parameters}}{{convertToJsonString name}}: {
                        "type": {{#if (isStringType type)}}"string"{{/if}}{{#if (isIntegerType type)}}"integer"{{/if}}{{#if (isNumberType type)}}"number"{{/if}}{{#if (isBooleanType type)}}"boolean"{{/if}},
                        "description": {{convertToJsonString description}}
                      }{{#unless @last}},
                      {{/unless}}{{/each}}
                    },
                    "required": [
                      {{#each requiredParameters}}{{convertToJsonString name}}{{#unless @last}},
                      {{/unless}}{{/each}}
                    ]
                  }
                }{{#unless @last}},
                {{/unless}}{{/each}}
              ]
            }
          ],
          "generationConfig": {
            "stopSequences": [
              "Title"
            ],
            "temperature": 1.0,
            "topP": 0.8,
            "topK": 10
          }
        }
httpHeaders:
  x-goog-api-key: "{{apiKey}}"
answerPath: candidates[0].content.parts[0].text
inputTokenPath: usageMetadata.promptTokenCount
outputTokenPath: usageMetadata.candidatesTokenCount
finishReasonPath: candidates[0].finishReason
finishReasonMappings:
  STOP: DONE
toolCallsPath: candidates[0].content.parts
toolNamePath: functionCall.name
toolArgumentsPath: functionCall.args
